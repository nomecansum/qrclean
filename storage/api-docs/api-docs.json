{
    "openapi": "3.0.0",
    "info": {
        "title": "Spotdesking API",
        "description": "Spotdesking [Aka QRCLEAN] API Description",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "/api"
        }
    ],
    "paths": {
        "/auth/login": {
            "post": {
                "tags": [
                    "Autorizacion"
                ],
                "summary": "Inicia sesion para el usuario y devuelve el token de acceso",
                "operationId": "cdf452d2ed99a23c8464e289c7fce73b",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "username",
                                    "password"
                                ],
                                "properties": {
                                    "username": {
                                        "description": "username",
                                        "type": "string"
                                    },
                                    "password": {
                                        "description": "password",
                                        "type": "string"
                                    },
                                    "remember_me": {
                                        "description": "remember_me",
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Ha ocurrido un error."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/auth/logout": {
            "get": {
                "tags": [
                    "Autorizacion"
                ],
                "summary": "Cerrar sesion para el usuario actual",
                "operationId": "d7b22dfe8ef07f2fa0268b7b6349663a",
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Ha ocurrido un error."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/auth/user": {
            "get": {
                "tags": [
                    "Autorizacion"
                ],
                "summary": "Obtiene los datos del usuario actual",
                "operationId": "04ff6d178635c85a0486987fea31407d",
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Ha ocurrido un error."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/test": {
            "get": {
                "tags": [
                    "Generales"
                ],
                "summary": "Consulta de test de la API",
                "operationId": "4eb3b6fe3d9afedc81e22d5e90a95955",
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Ha ocurrido un error."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/entidades": {
            "get": {
                "tags": [
                    "Generales"
                ],
                "summary": "Consulta de entidades del cliente",
                "operationId": "c6ad5f09c8caa3b92afa2cb6cb0aa6ef",
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Ha ocurrido un error."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/incidencias/list": {
            "post": {
                "tags": [
                    "Gestion de incidencias"
                ],
                "summary": "Devuelve las incidencias de un cliente segun los filtros",
                "operationId": "ce3cca75d635b0c97f8b5abc0935e5ec",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "fec_desde": {
                                        "description": "Fecha de inicio de la consulta",
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "fec_hasta": {
                                        "description": "Fecha de fin de la consulta",
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "tipoinc": {
                                        "description": "IDs de tipo de incidencia",
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    },
                                    "id_estado": {
                                        "description": "IDS de estado de la incidencia",
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    },
                                    "puesto": {
                                        "description": "Puestos afectado por la incidencia",
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Ha ocurrido un error."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/incidencias": {
            "put": {
                "tags": [
                    "Gestion de incidencias"
                ],
                "summary": "Crea una nueva incidencia",
                "operationId": "6ea67fd97a9a7a01811166734128de38",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "des_incidencia",
                                    "id_tipo_incidencia",
                                    "id_puesto",
                                    "id_usuario_apertura"
                                ],
                                "properties": {
                                    "des_incidencia": {
                                        "description": "Tiutulo de la incidencia",
                                        "type": "string",
                                        "maxLength": 500
                                    },
                                    "txt_incidencia": {
                                        "description": "Texto descriptivo  de la incidencia",
                                        "type": "string",
                                        "maxLength": 65535
                                    },
                                    "id_incidencia_externo": {
                                        "description": "ID externo",
                                        "type": "number",
                                        "maxLength": 100
                                    },
                                    "id_tipo_incidencia": {
                                        "description": "Tipo de la incidencia",
                                        "type": "number"
                                    },
                                    "id_estado": {
                                        "description": "ID Estado de la incidencia",
                                        "type": "number"
                                    },
                                    "id_puesto": {
                                        "description": "ID Puesto afectado por la incidencia",
                                        "type": "string"
                                    },
                                    "id_usuario_apertura": {
                                        "description": "ID de usuario que abre la incidencia",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Ha ocurrido un error."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/incidencias/add_accion": {
            "post": {
                "tags": [
                    "Gestion de incidencias"
                ],
                "summary": "Añade una nueva accion a la  incidencia",
                "operationId": "d9fc6df7a072aef44b9e973583a8ce6f",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "id_incidencia",
                                    "id_usuario",
                                    "des_accion"
                                ],
                                "properties": {
                                    "id_incidencia": {
                                        "description": "ID de incidencia",
                                        "type": "number"
                                    },
                                    "des_accion": {
                                        "description": "Texto  de la accion",
                                        "type": "string",
                                        "maxLength": 2000
                                    },
                                    "id_usuario": {
                                        "description": "ID de usuario que realiza la accion",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Ha ocurrido un error."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/incidencias/cerrar": {
            "post": {
                "tags": [
                    "Gestion de incidencias"
                ],
                "summary": "Cierra una incidencia",
                "operationId": "44431499f5397ec72f4a8ba70b43bbf5",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "id_incidencia",
                                    "id_usuario"
                                ],
                                "properties": {
                                    "id_incidencia": {
                                        "description": "ID de incidencia",
                                        "type": "number"
                                    },
                                    "comentario_cierre": {
                                        "description": "Comentario de cierre de la incidencia",
                                        "type": "string",
                                        "maxLength": 65535
                                    },
                                    "id_usuario": {
                                        "description": "ID de usuario que realiza la accion",
                                        "type": "string"
                                    },
                                    "id_causa_cierre": {
                                        "description": "Identificador de causa de cierre",
                                        "type": "number"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Indeterminado."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/incidencias/reabrir": {
            "post": {
                "tags": [
                    "Gestion de incidencias"
                ],
                "summary": "Reabre una incidencia cerrada",
                "operationId": "85ccb003c4c39eccd97caf3fedfe0180",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "id_incidencia",
                                    "id_usuario"
                                ],
                                "properties": {
                                    "id_incidencia": {
                                        "description": "ID de incidencia",
                                        "type": "number"
                                    },
                                    "id_usuario": {
                                        "description": "ID de usuario que realiza la accion",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Ha ocurrido un error."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/salas/sincronizar_estructura_incidencias_empresa_desde_fecha": {
            "get": {
                "tags": [
                    "Integracion con salas"
                ],
                "summary": "Solicitud de sincronización de información estructural de incidencias (Por cambios en salas, departamentos o tipos de incidencias)",
                "operationId": "50178506ff2858dd658eb11de4c7ed46",
                "parameters": [
                    {
                        "name": "fecha",
                        "in": "path",
                        "description": "Fecha de incicio de la consulta",
                        "required": true
                    },
                    {
                        "name": "id_cliente",
                        "in": "path",
                        "description": "Identificador de cliente",
                        "required": false
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Error en la peticion",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "default": {
                        "description": "Indeterminado."
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        },
        "/salas/add_incidencia_empresa": {
            "post": {
                "tags": [
                    "Integracion con salas"
                ],
                "summary": "Crea una nueva incidencia desde gestion de salas",
                "operationId": "2547ba5e9f70585c13dffd3dd7f88b75",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "required": [
                                    "id_cliente",
                                    "sala_id",
                                    "fecha",
                                    "descripcion_adicional",
                                    "estado",
                                    "incidencia_sala_id"
                                ],
                                "properties": {
                                    "id_cliente": {
                                        "description": "ID de cliente",
                                        "type": "integer"
                                    },
                                    "sala_id": {
                                        "description": "ID de sala",
                                        "type": "integer"
                                    },
                                    "fecha": {
                                        "description": "Fecha de incio de la incidencia",
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "descripcion_adicional": {
                                        "description": "Titulo de la incidencia",
                                        "type": "string",
                                        "maxLength": 500
                                    },
                                    "tipo_incidencia_id": {
                                        "description": "ID de tipo de incidencia",
                                        "type": "integer"
                                    },
                                    "estado": {
                                        "description": "ID de estado de la incidencia",
                                        "type": "integer"
                                    },
                                    "reunion_anterior": {
                                        "description": "Datos de la reunion anterior",
                                        "type": "string"
                                    },
                                    "reunion_actual": {
                                        "description": "Datos de la reunion actual",
                                        "type": "string"
                                    },
                                    "reunion_posterior": {
                                        "description": "Datos de la reunion posteriore",
                                        "type": "string"
                                    },
                                    "notas_admin": {
                                        "description": "Detalle de la incidencia",
                                        "type": "integer",
                                        "maxLength": 65535
                                    },
                                    "incidencia_sala_id": {
                                        "description": "ID de la incidencia en salas",
                                        "type": "integer",
                                        "maxLength": 65535
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id_incidencia": {
                                            "description": "ID de incidencia",
                                            "type": "number"
                                        },
                                        "id_usuario": {
                                            "description": "ID de usuario que realiza la accion",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "passport": []
                    }
                ]
            }
        }
    },
    "tags": [
        {
            "name": "Autorizacion",
            "description": "Consultas relacionadas con la autorización de usuarios para el API"
        },
        {
            "name": "Generales",
            "description": "Consulta de datos existentes en la plataforma"
        },
        {
            "name": "Gestion de incidencias",
            "description": "Consulta de para la gestion de incidencias generica"
        },
        {
            "name": "Integracion con salas",
            "description": "Consulta de para la integracion con gestion de salas"
        }
    ],
    "components": {
        "securitySchemes": {
            "passport": {
                "type": "oauth2",
                "description": "Laravel passport oauth2 security.",
                "in": "header",
                "scheme": "https",
                "flows": {
                    "password": {
                        "authorizationUrl": "http://qrclean/api/auth/login",
                        "tokenUrl": "http://qrclean/api/auth/login",
                        "refreshUrl": "http://qrclean/auth/token/refresh",
                        "scopes": []
                    }
                }
            }
        }
    }
}